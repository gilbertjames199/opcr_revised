/*! For license information please see 8740.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8740],{5216(e,t,o){o.d(t,{A:()=>_});var r=o(9726),n={class:"masonry-item w-100"},i={class:"row gap-20"},a={class:"col-md-3 col-6"},s={class:"layers bd bgc-white p-20"},c={class:"layer w-100 mB-10"},l={class:"lh-1"},d={class:"layer w-100"},u={class:"peers ai-sb fxw-nw"},m={class:"layers bd bgc-white p-20"},p={class:"layer w-100"},f={class:"peers ai-sb fxw-nw"},h={class:"form-control"};const y={props:{mun:Array},data:function(){return{mun_code:"",barsel:"",munsel:"",bar:[]}},computed:{my_mun:function(){return this.mun_code},my_bar:function(){return this.bar}},mounted:function(){},watch:{},methods:{loadBar:function(){var e=this;alert(this.munsel),""===this.munsel||axios.post("/places/bar",{mun:this.munsel}).then(function(t){e.bar=t.data.data})},showMun:function(){alert(this.mun_code)}}};const v=(0,o(6262).A)(y,[["render",function(e,t,o,y,v,_){return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("h6",l,"Municipalities "+(0,r.toDisplayString)(_.my_mun),1)]),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",u,[t[2]||(t[2]=(0,r.createElementVNode)("div",{class:"peer peer-greed"},[(0,r.createElementVNode)("span",{id:"sparklinedash"})],-1)),(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return v.munsel=e}),onChange:t[1]||(t[1]=function(){return _.loadBar&&_.loadBar.apply(_,arguments)})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.mun,function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",null,(0,r.toDisplayString)(e.citymunDesc),1)}),256))],544),[[r.vModelSelect,v.munsel]])])])]),(0,r.createElementVNode)("div",m,[t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"layer w-100 mB-10"},[(0,r.createElementVNode)("h6",{class:"lh-1"},"Barangay")],-1)),(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("div",f,[t[4]||(t[4]=(0,r.createElementVNode)("div",{class:"peer peer-greed"},[(0,r.createElementVNode)("span",{id:"sparklinedash"})],-1)),(0,r.createElementVNode)("select",h,[t[3]||(t[3]=(0,r.createElementVNode)("option",null,null,-1)),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(v.bar,function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",null,(0,r.toDisplayString)(e.brgyDesc),1)}),256))])])])])])])])}]]),_=v},8740(e,t,o){o.r(t),o.d(t,{default:()=>O});var r=o(9726),n={class:"relative row gap-20 masonry pos-r"},i={class:"col-md-8"},a={key:0,class:"fs-6 c-red-500"},s=["value"],c={key:1,class:"fs-6 c-red-500"},l={key:0},d={key:1},u={key:2,class:"fs-6 c-red-500"},m={key:3,class:"fs-6 c-red-500"},p={key:0},f={key:1},h={key:4,class:"fs-6 c-red-500"},y=["value"],v={key:5,class:"fs-6 c-red-500"},_=["disabled"];var g=o(9234),b=o(5216),E=o(5439),N=o(2072);function V(){var e,t,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function i(o,r,n,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return k(l,"_invoke",function(o,r,n){var i,s,c,l=0,d=n||[],u=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,o){return i=t,s=0,c=e,m.n=o,a}};function p(o,r){for(s=o,c=r,t=0;!u&&l&&!n&&t<d.length;t++){var n,i=d[t],p=m.p,f=i[2];o>3?(n=f===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((n=o<2&&p<i[1])?(s=0,m.v=r,m.n=i[1]):p<f&&(n=o<3||i[0]>r||r>f)&&(i[4]=o,i[5]=r,m.n=f,s=0))}if(n||o>1)return a;throw u=!0,r}return function(n,d,f){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,f),s=d,c=f;(t=s<2?e:c)||!u;){i||(s?s<3?(s>1&&(m.n=-1),p(s,c)):m.n=c:m.v=c);try{if(l=2,i){if(s||(n="next"),t=i[n]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),s=1);i=e}else if((t=(u=m.n<0)?c:o.call(r,m))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:u}}}(o,n,i),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(k(t={},r,function(){return this}),t),u=l.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,k(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=l,k(u,"constructor",l),k(l,"constructor",c),c.displayName="GeneratorFunction",k(l,n,"GeneratorFunction"),k(u),k(u,n,"Generator"),k(u,r,function(){return this}),k(u,"toString",function(){return"[object Generator]"}),(V=function(){return{w:i,m}})()}function k(e,t,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}k=function(e,t,o,r){function i(t,o){k(e,t,function(e){return this._invoke(t,o,e)})}t?n?n(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},k(e,t,o,r)}function w(e,t,o,r,n,i,a){try{var s=e[i](a),c=s.value}catch(e){return void o(e)}s.done?t(c):Promise.resolve(c).then(r,n)}const B={props:{paps_selected:Object,opcr_targets:Object,programs:Object,ooes:Object,opcr_list_id:String,editData:Object},components:{Select2:o.n(N)(),ModelSelect:E.om,Places:function(){return new Promise(function(e){setTimeout(function(){e(b.A)},2e3)})}},data:function(){return{submitted:!1,chart_selected:"",pap_selected:"",prog_selected:"",total:0,idprogram_selected:"0",program_typed:"",raaotype:"",ind:"",ind_opcr:"",form:(0,g.mN)({idsuccessindicator:"",idmfo:"",idpaps:"",amount:0,idprogram:"",idtarget:"",opcr_list_id:"",id:null}),pageTitle:"",data_programs:[],dt_ooes:[],dt_ooes_length:[]}},computed:{formattedPrograms:function(){var e=this,t=this.programs;return this.form.raaotype&&(t=t.filter(function(t){return t.ftype===e.form.raaotype})),this.form.FFUNCCOD&&(t=t.filter(function(t){return t.FFUNCCOD===e.form.FFUNCCOD})),t.map(function(e){return{value:e.recid,label:e.FPROGRAM,raaotype:e.ftype,FFUNCCOD:e.FFUNCCOD,raohsid:e.raohsid}})},computed_amount:function(){return this.format_number_conv(this.form.amount,2,!0)}},mounted:function(){var e=this;this.data_programs=this.programs.map(function(e){return e.FPROGRAM}),this.dt_ooes=this.ooes,void 0!==this.editData?(this.bari&&(this.bar=this.bari),this.pageTitle="Edit",this.form.idmfo=this.editData.idmfo,this.form.idpaps=Number(this.editData.idpaps),this.ind=this.paps_selected.findIndex(function(t){return t.id===e.form.idpaps}),console.log(this.ind),console.log(this.form.idpaps),this.paps_selected&&this.$nextTick(function(){e.form.idpaps&&(console.log(e.paps_selected),console.log(e.form.idpaps),e.setMFOandSuccessIndicator())}),this.form.amount=this.editData.amount,this.form.id=this.editData.id,this.form.year=this.editData.year,this.form.FFUNCCOD=this.editData.FFUNCCOD,this.form.raaotype=this.editData.raaotype,this.filterProgram(),this.form.idprogram=this.editData.idprogram,this.form.opcr_list_id=this.editData.opcr_list_id):(this.pageTitle="Create ",this.form.opcr_list_id=this.opcr_list_id,this.setCurrentYear())},methods:{submit:function(){if(void 0!==this.editData)this.form.patch("/opcrbudgeting/update/"+this.form.id,this.form);else{this.form.post("/opcrbudgeting/store")}},addAccount:function(){alert("addAccount")},searchByAccountCode:function(){var e=this.codes.indexOf(this.form.account_code.toString());this.chart_selected=this.accounts[parseInt(e)],this.form.object_of_expenditure=this.chart_selected},searchByAccountCodeForEditMounted:function(){var e=this.codes.indexOf(this.form.account_code.toString());this.chart_selected=this.accounts[parseInt(e)]},setCurrentYear:function(){var e=(new Date).getFullYear();this.form.year=parseFloat(e)+1},filterProgram:function(){this.$refs.raaoSelect},loadOOE:function(){var e,t=this;return(e=V().m(function e(){var o;return V().w(function(e){for(;;)switch(e.n){case 0:return t.dt_ooes=[],o=parseFloat(t.form.year)-1,e.n=1,axios.get("/ooes/filtered/ooes",{params:{idprogram:t.form.idprogram,FFUNCCOD:t.form.FFUNCCOD,raaotype:t.form.raaotype,year:o}}).then(function(e){t.dt_ooes=e.data}).catch(function(e){console.error(e)});case 1:t.form.amount=t.calculateTotalAnnual();case 2:return e.a(2)}},e)}),function(){var t=this,o=arguments;return new Promise(function(r,n){var i=e.apply(t,o);function a(e){w(i,r,n,a,s,"next",e)}function s(e){w(i,r,n,a,s,"throw",e)}a(void 0)})})()},setMFOandSuccessIndicator:function(){var e=this;this.ind=this.paps_selected.findIndex(function(t){return t.id===e.form.idpaps}),this.ind_opcr=this.opcr_targets.findIndex(function(t){return t.idpaps===e.form.idpaps}),this.ind>-1?(this.form.idmfo=this.paps_selected[this.ind].idmfo,this.paps_selected[this.ind].m_f_o&&(this.mfo_text=this.paps_selected[this.ind].m_f_o.mfo_desc),this.paps_selected[this.ind].success_indicator&&(this.success_indicator_text=this.paps_selected[this.ind].success_indicator.success_indicator,this.form.idsuccessindicator=this.paps_selected[this.ind].success_indicator.id)):(this.mfo_text="",this.form.idmfo="",this.success_indicator_text="",this.form.idsuccessindicator=""),this.ind_opcr>-1&&(this.form.idtarget=this.opcr_targets[this.ind_opcr].id),console.log("index: rtert "+this.ind),console.log("idmfo: dsadasd "+this.form.idmfo)},calculateTotalAnnual:function(){return this.dt_ooes.reduce(function(e,t){var o=t.sem1+t.sem2;return console.log(t.sem1),e+o},0)}}};const D=(0,o(6262).A)(B,[["render",function(e,t,o,g,b,E){var N=(0,r.resolveComponent)("multiselect");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[t[19]||(t[19]=(0,r.createElementVNode)("div",{class:"peers fxw-nw jc-sb ai-c"},[(0,r.createElementVNode)("h3",null,"Edit Target Budget ")],-1)),(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("form",{onSubmit:t[11]||(t[11]=(0,r.withModifiers)(function(e){return E.submit()},["prevent"]))},[t[13]||(t[13]=(0,r.createElementVNode)("input",{type:"hidden",required:""},null,-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=function(e){return b.form.idpaps=e}),class:"form-control",autocomplete:"positionchrome-off"},null,512),[[r.vModelText,b.form.idpaps]]),t[14]||(t[14]=(0,r.createElementVNode)("label",null,"Major Final Output",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.mfo_text=t}),readonly:""},null,512),[[r.vModelText,e.mfo_text]]),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":t[2]||(t[2]=function(e){return b.form.idmfo=e}),class:"form-control",autocomplete:"chrome-off"},null,512),[[r.vModelText,b.form.idmfo]]),b.form.errors.idmfo?((0,r.openBlock)(),(0,r.createElementBlock)("div",a,(0,r.toDisplayString)(b.form.errors.idmfo),1)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("label",null,"PAPS "+(0,r.toDisplayString)(b.form.idpaps),1),(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return b.form.idpaps=e}),onChange:t[4]||(t[4]=function(){return E.setMFOandSuccessIndicator&&E.setMFOandSuccessIndicator.apply(E,arguments)})},[t[12]||(t[12]=(0,r.createElementVNode)("option",null,null,-1)),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.paps_selected,function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e.id},(0,r.toDisplayString)(e.paps_desc)+" - "+(0,r.toDisplayString)(e.id),9,s)}),256))],544),[[r.vModelSelect,b.form.idpaps]]),b.form.errors.idpaps?((0,r.openBlock)(),(0,r.createElementBlock)("div",c,[b.form.idpaps?((0,r.openBlock)(),(0,r.createElementBlock)("span",l,"A budget with the selected PAPS and program has already been saved. Select a different PAPS!")):((0,r.openBlock)(),(0,r.createElementBlock)("span",d,"PAPS is required"))])):(0,r.createCommentVNode)("",!0),t[15]||(t[15]=(0,r.createElementVNode)("label",null,"Success Indicator",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.success_indicator_text=t}),readonly:""},null,512),[[r.vModelText,e.success_indicator_text]]),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":t[6]||(t[6]=function(e){return b.form.idsuccessindicator=e}),class:"form-control",autocomplete:"chrome-off"},null,512),[[r.vModelText,b.form.idsuccessindicator]]),b.form.errors.idsuccessindicator?((0,r.openBlock)(),(0,r.createElementBlock)("div",u,(0,r.toDisplayString)(b.form.errors.idsuccessindicator),1)):(0,r.createCommentVNode)("",!0),t[16]||(t[16]=(0,r.createElementVNode)("label",null,"PROGRAM",-1)),t[17]||(t[17]=(0,r.createTextVNode)("Â  ",-1)),(0,r.createElementVNode)("div",null,[(0,r.createVNode)(N,{options:E.formattedPrograms,searchable:!0,modelValue:b.form.idprogram,"onUpdate:modelValue":t[7]||(t[7]=function(e){return b.form.idprogram=e}),label:"label","track-by":"label",onClose:E.loadOOE},null,8,["options","modelValue","onClose"])]),b.form.errors.idprogram?((0,r.openBlock)(),(0,r.createElementBlock)("div",m,[b.form.idprogram?((0,r.openBlock)(),(0,r.createElementBlock)("span",p,"A budget with the selected PAPS and program has already been saved. Select a different program!")):((0,r.openBlock)(),(0,r.createElementBlock)("span",f,"Program is required"))])):(0,r.createCommentVNode)("",!0),b.form.errors.GAD?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,(0,r.toDisplayString)(b.form.errors.GAD),1)):(0,r.createCommentVNode)("",!0),t[18]||(t[18]=(0,r.createElementVNode)("label",null,"AMOUNT ",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=function(e){return b.form.amount=e})},null,512),[[r.vModelText,b.form.amount]]),(0,r.createElementVNode)("input",{type:"text",class:"form-control",value:E.computed_amount,hidden:""},null,8,y),b.form.errors.amount?((0,r.openBlock)(),(0,r.createElementBlock)("div",v,(0,r.toDisplayString)(b.form.errors.amount),1)):(0,r.createCommentVNode)("",!0),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":t[9]||(t[9]=function(e){return b.form.id=e}),class:"form-control",autocomplete:"chrome-off"},null,512),[[r.vModelText,b.form.id]]),(0,r.createElementVNode)("button",{type:"button",class:"btn text-white btn-primary mt-3 text-white",onClick:t[10]||(t[10]=function(e){return E.submit()}),disabled:b.form.processing}," Save changes ",8,_)],32)])])}]]),O=D}}]);